{% extends "base.html" %}

{% block title %}Test · Eneagrama{% endblock %}

{% block content %}

<div class="row justify-content-center">
  <div class="col-lg-9">

    <!-- Barra de progreso -->
    <div class="progress mb-3">
      <div class="progress-bar" role="progressbar"
           style="width: {{ (page / total_pages) * 100 }}%;">
        Página {{ page }} de {{ total_pages }}
      </div>
    </div>

    <form method="POST">

      {% for q in questions %}
      <div class="form-check p-3 mb-2 bg-white rounded shadow-sm">

        <input class="form-check-input"
               type="checkbox"
               id="q_{{ q.id }}"
               name="q_{{ q.id }}"
               value="1"
               {% if answers.get(q.id|string) %} checked {% endif %}>


        <label class="form-check-label fw-semibold" for="q_{{ q.id }}">
          {{ loop.index0 + 1 + ((page - 1) * 30) }}. {{ q.text }}
        </label>

      </div>
      {% endfor %}

      <div class="mt-4 text-center">

        {% if page < total_pages %}
          <button type="submit" class="btn btn-primary btn-lg px-4">
            Siguiente página
          </button>
        {% else %}
          <button type="submit" class="btn btn-success btn-lg px-4">
            Ver Resultado
          </button>
        {% endif %}

      </div>

    </form>

  </div>
</div>

{% endblock %}

